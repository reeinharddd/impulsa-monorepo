<header
  class="sticky top-0 z-50 border-b border-gray-100/80 bg-white/80 backdrop-blur-md transition-all duration-300"
  [class.shadow-sm]="scrolled()"
>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <nav class="flex h-16 items-center justify-between">
      <a routerLink="/" class="flex items-center gap-2.5">
        <div
          class="flex h-9 w-9 items-center justify-center rounded-lg bg-brand-primary font-bold text-white shadow-md shadow-brand-primary/20"
        >
          {{ logoInitial() }}
        </div>
        <span class="text-xl font-bold tracking-tight text-slate-900">{{ appName() }}</span>
      </a>

      <div class="hidden items-center gap-1 md:flex">
        @for (item of navItems(); track item.id) {
          @if (item.external) {
            <a
              [href]="item.href"
              target="_blank"
              rel="noopener noreferrer"
              class="rounded-lg px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-50 hover:text-slate-900"
            >
              {{ item.label | translate }}
            </a>
          } @else {
            <a
              [routerLink]="item.href"
              routerLinkActive="text-brand-primary bg-brand-surface"
              [routerLinkActiveOptions]="{ exact: true }"
              class="rounded-lg px-4 py-2 text-sm font-medium text-slate-600 transition hover:bg-slate-50 hover:text-slate-900"
            >
              {{ item.label | translate }}
            </a>
          }
        }
      </div>

      <div class="hidden items-center gap-3 md:flex">
        <a
          routerLink="/auth/login"
          class="rounded-lg px-4 py-2.5 text-sm font-semibold text-slate-600 transition hover:bg-slate-50 hover:text-slate-900"
        >
          {{ 'COMMON.BUTTONS.LOGIN' | translate }}
        </a>
        <a
          routerLink="/auth/register"
          class="rounded-lg bg-brand-primary px-5 py-2.5 text-sm font-semibold text-white shadow-md shadow-brand-primary/20 transition hover:-translate-y-0.5 hover:shadow-lg hover:shadow-brand-primary/30 active:translate-y-0"
        >
          {{ 'COMMON.BUTTONS.REGISTER' | translate }}
        </a>
      </div>

      <button
        type="button"
        class="rounded-lg p-2 text-slate-600 hover:bg-slate-100 md:hidden"
        (click)="toggleMobileMenu()"
      >
        <ui-icon [name]="mobileMenuOpen() ? CloseIcon : MenuIcon" size="md" />
      </button>
    </nav>
  </div>

  @if (mobileMenuOpen()) {
    <div class="border-t border-gray-100 bg-white md:hidden">
      <div class="space-y-1 px-4 py-4">
        @for (item of navItems(); track item.id) {
          @if (item.external) {
            <a
              [href]="item.href"
              target="_blank"
              rel="noopener noreferrer"
              class="block rounded-lg px-4 py-3 text-base font-medium text-slate-600 hover:bg-slate-50"
              (click)="closeMobileMenu()"
            >
              {{ item.label | translate }}
            </a>
          } @else {
            <a
              [routerLink]="item.href"
              routerLinkActive="text-brand-primary bg-brand-surface"
              class="block rounded-lg px-4 py-3 text-base font-medium text-slate-600 hover:bg-slate-50"
              (click)="closeMobileMenu()"
            >
              {{ item.label | translate }}
            </a>
          }
        }

        <div class="mt-4 flex flex-col gap-3 border-t border-gray-100 pt-4">
          <a
            routerLink="/auth/login"
            class="rounded-lg border border-gray-200 px-4 py-3 text-center text-base font-semibold text-slate-700"
            (click)="closeMobileMenu()"
          >
            {{ 'COMMON.BUTTONS.LOGIN' | translate }}
          </a>
          <a
            routerLink="/auth/register"
            class="rounded-lg bg-brand-primary px-4 py-3 text-center text-base font-semibold text-white"
            (click)="closeMobileMenu()"
          >
            {{ 'COMMON.BUTTONS.REGISTER' | translate }}
          </a>
        </div>
      </div>
    </div>
  }
</header>

<main class="min-h-[calc(100vh-4rem)]">
  <router-outlet />
</main>

@if (showFooter()) {
  <footer class="border-t border-gray-100 bg-slate-50">
    <div class="mx-auto max-w-7xl px-4 py-12 sm:px-6 lg:px-8 lg:py-16">
      <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-5">
        <div class="lg:col-span-2">
          <a routerLink="/" class="flex items-center gap-2.5">
            <div
              class="flex h-9 w-9 items-center justify-center rounded-lg bg-brand-primary font-bold text-white"
            >
              {{ logoInitial() }}
            </div>
            <span class="text-xl font-bold tracking-tight text-slate-900">{{ appName() }}</span>
          </a>
          <p class="mt-4 max-w-xs text-sm text-slate-600">
            {{ tagline() | translate }}
          </p>
        </div>

        @for (group of footerLinks(); track group.title) {
          <div>
            <h3 class="text-sm font-semibold text-slate-900">{{ group.title | translate }}</h3>
            <ul class="mt-4 space-y-3">
              @for (link of group.links; track link.label) {
                <li>
                  @if (link.external) {
                    <a
                      [href]="link.href"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-sm text-slate-600 hover:text-slate-900"
                    >
                      {{ link.label | translate }}
                    </a>
                  } @else {
                    <a [routerLink]="link.href" class="text-sm text-slate-600 hover:text-slate-900">
                      {{ link.label | translate }}
                    </a>
                  }
                </li>
              }
            </ul>
          </div>
        }
      </div>

      <div
        class="mt-12 flex flex-col items-center justify-between gap-4 border-t border-gray-200 pt-8 sm:flex-row"
      >
        <p class="text-sm text-slate-500">
          {{ 'COMMON.FOOTER.RIGHTS' | translate: { year: currentYear } }}
        </p>
      </div>
    </div>
  </footer>
}
